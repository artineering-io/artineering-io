<!-- start custom head snippets -->

<!-- slick carousel -->
<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick-theme.css"/>

<!-- TwentyTwenty -->
<link rel="stylesheet" href="/assets/css/plugins/twentytwenty.css" type="text/css" media="screen"/>

<!-- impactradius -->
<script type="text/javascript">
  (function(a, b, c, d, e, f, g) {
    e['ire_o'] = c;
    e[c] = e[c] || function() {
      (e[c].a = e[c].a || []).push(arguments)
    };
    f = d.createElement(b);
    g = d.getElementsByTagName(b)[0];
    f.async = 1;
    f.src = a;
    g.parentNode.insertBefore(f, g);
  })
  ('//d.impactradius-event.com/A2029755-fe35-472d-8f38-84a5873d4edc1.js', 'script', 'ire', document, window);
  ire('identify', {
    customerid: '' /*INSERT CUSTOMER ID*/ ,
    customeremail: '' /*INSERT SHA1 HASHED CUSTOMER EMAIL*/
  });
</script>

<!-- Google Analytics -->
<script>
function enableGA() {
  {%- if jekyll.environment == 'production' and site.google_tag_manager -%}
  if(!(window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
    // Google Tag Manager
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','{{site.google_tag_manager}}');
  }
  {%- endif -%}
};
function enableGAAnon() {
  {%- if jekyll.environment == 'production' and site.google_analytics_anon -%}
  if(!(window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
    // Anonymous google analytics
    if (!document.getElementById('googleAnalyticsAnon')) {
      const script = document.createElement('script');
      script.src = 'https://www.googletagmanager.com/gtag/js?id={{site.google_analytics_anon}}';
      script.id = 'googleAnalyticsAnon';
      script.async = true
      document.body.appendChild(script);
      // set up google analytics
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', '{{site.google_analytics_anon}}', {
        'client_storage': 'none',
        'anonymizeIp': true,
        'allow_google_signals': false
      });
    }
  }
  {%- endif -%}
};
</script>

<!-- Twitter timeline -->
<script>
function loadTwitterTimeline() {
  if (!document.getElementById('twitterTimeline')) {
    const script = document.createElement('script');
    script.src = 'https://platform.twitter.com/widgets.js';
    script.id = 'twitterTimeline';
    script.async = true
    document.body.appendChild(script);
  }
};
</script>

<!-- cookie consent by Osano -->
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  container: document.getElementById("content"),
  palette: {
    popup: { background: "#237afc" },
    button: { background: "#fff", "text": "#237afc" }
  },
  theme: "classic",
  type: "opt-in",
  content: {
    href: "/legal/cookie-policy",
    policy: 'Revise Cookies',
    message: "This website uses cookies to help us understand our readers.<br>With this data, we aim to create better content and ultimately develop a better experience for you!"
  },
  onInitialise: function (status) {
    console.log("Initializing");
    var type = this.options.type;
    var didConsent = this.hasConsented();
    if (type == 'opt-in' && didConsent) {
      console.log("Cookies consented");
      enableGA();
      loadTwitterTimeline();
    } else {
      console.log("Anonymous browsing");
      enableGAAnon();
    }
   },
   onStatusChange: function(status, chosenBefore) {
    var type = this.options.type;
    var didConsent = this.hasConsented();
    if (type == 'opt-in' && didConsent) {
      console.log("Cookies consented");
      enableGA();
      loadTwitterTimeline();
    } else {
      console.log("Anonymous browsing")
      window.location.reload(true);
    }
   },
   onRevokeChoice: function() {
    var type = this.options.type;
    var didConsent = this.hasConsented();
    if (type == 'opt-in' && didConsent) {
      console.log("Cookies consented");
      enableGA();
      loadTwitterTimeline();
    } else {
      console.log("Anonymous browsing")
      window.location.reload(true);
    }
  },
   onPopupOpen: function() {
     console.log("Anonymous browsing")
     enableGAAnon();
   }
})});
</script>

<script type="text/javascript">
  //$('#revoke-cookie').click(function() { $('.cc-revoke').addClass("aio-consent-visible") });
</script>

<!-- insert favicons. use http://realfavicongenerator.net/ -->
<!-- end custom head snippets -->
